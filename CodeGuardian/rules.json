{
  "rules": [
    {
      "id": "entitlements-modification",
      "name": "Entitlements File Modified",
      "description": "Entitlements files should be reviewed carefully as they affect app permissions",
      "severity": "error",
      "type": "file_pattern",
      "patterns": [
        "**/*.entitlements"
      ],
      "message": "Entitlements file has been modified. Please ensure all changes are necessary and secure."
    },
    {
      "id": "release-branch-podfile-lock",
      "name": "Podfile.lock Required for Release",
      "description": "Release branches must include Podfile.lock changes",
      "severity": "error",
      "type": "dependent_file",
      "target_branch": "release/*",
      "source_patterns": [
        "**/Podfile"
      ],
      "dependent_files": [
        "**/Podfile.lock"
      ],
      "message": "Podfile changed but Podfile.lock not updated. Run 'pod install' before merging to release."
    },
    {
      "id": "master-branch-naming",
      "name": "Master Branch Naming Convention",
      "description": "Branches merging to master must follow naming conventions",
      "severity": "error",
      "type": "branch_naming",
      "target_branches": ["main"],
      "allowed_patterns": [
        "feature/*",
        "bugfix/*"
      ],
      "message": "Branch name doesn't follow conventions for merging to master. Use feature/* or bugfix/* pattern."
    },
    {
      "id": "release-branch-naming",
      "name": "Release Branch Naming Convention",
      "description": "Branches merging to release must follow naming conventions",
      "severity": "error",
      "type": "branch_naming",
      "target_branches": ["release/*"],
      "allowed_patterns": [
        "bugfix/*",
        "hotfix/*",
        "release/*"
      ],
      "message": "Only bugfix/*, hotfix/*, or release/* branches can be merged to release branches."
    },
    {
      "id": "force-unwrap-usage",
      "name": "Force Unwrapping Detected",
      "description": "Force unwrapping can cause crashes and should be avoided",
      "severity": "error",
      "type": "code_pattern",
      "patterns": [
         "\\b\\w+!\\s*[\\.,;\\)\\]\\}]",
         "\\b\\w+!\\s*$"
      ],
      "file_patterns": [
        "**/*.swift"
      ],
      "exclude_patterns": [
        "// swiftlint:disable:next force_unwrapping",
        "// swiftlint:disable force_unwrapping"
      ],
      "message": "Force unwrapping detected. Consider using optional binding or nil coalescing instead."
    },
    {
      "id": "print-statements",
      "name": "Print Statements in Production Code",
      "description": "Print statements should not be committed to production code",
      "severity": "warning",
      "type": "code_pattern",
      "patterns": [
        "print\\s*\\("
      ],
      "file_patterns": [
        "**/*.swift"
      ],
      "exclude_patterns": [
        "// DEBUG:",
        "// TODO:",
        "#if DEBUG"
      ],
      "message": "Print statement found. Consider using proper logging or removing debug prints."
    },
    {
      "id": "todo-fixme-comments",
      "name": "TODO/FIXME Comments Added",
      "description": "Track technical debt and pending work",
      "severity": "info",
      "type": "code_pattern",
      "patterns": [
        "// TODO:",
        "// FIXME:",
        "// HACK:"
      ],
      "file_patterns": [
        "**/*.swift"
      ],
      "message": "TODO/FIXME comment added. Consider creating a ticket to track this work."
    },
    {
      "id": "swift-sources-changelog-required",
      "name": "Swift Sources Modified - Changelog Required",
      "description": "When Swift source files are modified, the changelog should be updated",
      "severity": "warning",
      "type": "dependent_file",
      "source_patterns": [
        "*.swift"
      ],
      "source_folders": [
        "SpellingBee/Sources/"
      ],
      "dependent_files": [
        "changelog.md"
      ],
      "message": "Swift source files have been modified. Please update the changelog to document your changes."
    }
  ],
  "settings": {
    "fail_on_errors": true,
    "max_warnings": 10,
    "exclude_files": [
      "**/Pods/**",
      "**/DerivedData/**",
      "**/.build/**",
      "**/node_modules/**"
    ]
  }
}
